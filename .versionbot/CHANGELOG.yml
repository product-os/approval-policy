- commits:
    - subject: Prevent approval of forks with labels
      hash: cf016d36486f8920b85825923d891724e0c40a4c
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Exclude restricted repos from label rules
      hash: af0216eed014c0fe029f341f0d63f2ff6b8e9997
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Limit default approvals to team memberships, not org memberships
      hash: 77a07248eb6152ae4afe1d8da7bf7ace0b12b5f6
      body: >
        Teams are a more secure way to manage who can approve at different
        levels.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Ignore edited comments when evaluating approval
      hash: b0092869a1a6fb05dd0e440a9868edd3be138e9a
      body: |
        This prevents users with permission to edit comments
        from changing the message to something that would self-certify
        on behalf of another user.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.3.3
  title: ""
  date: 2023-06-26T20:13:03.404Z
- commits:
    - subject: Use installation app tokens and a matrix to sync policies
      hash: 873899cbe5b2d9c121061baf72b9d9bdb4ba77a0
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.3.2
  title: ""
  date: 2023-05-31T15:03:45.321Z
- commits:
    - subject: Update commit message used to sync policies
      hash: 47702094e68fe65a2fb80738d159c8aa4844f68c
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.3.1
  title: ""
  date: 2023-05-24T12:38:43.967Z
- commits:
    - subject: Require sudoer approval for some repositories
      hash: d66046e9fa8bc1ec06acaec05d50f7108c956ded
      body: |
        Also use yaml anchors to avoid duplication.
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.3.0
  title: ""
  date: 2023-04-27T19:31:26.147Z
- commits:
    - subject: Revert "Do not match renovate labels on balena-os repos for now"
      hash: fde7a66ca0e26a5e871e99060ec595e982fcd19d
      body: |
        This reverts commit 8a6150414d4825d97267769852e3d7a3229a5739.
      footer:
        Change-type: patch
        change-type: patch
      author: Kyle Harding
      nested: []
  version: 1.2.6
  title: ""
  date: 2023-03-23T17:51:26.775Z
- commits:
    - subject: Split digest and pinDigest policies
      hash: 7c76c1616cde4e67b071766d6c3fb13b0a8f3fa9
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.2.5
  title: ""
  date: 2023-02-27T19:15:01.626Z
- commits:
    - subject: Include new pinDigest label
      hash: 555c0ceeb755303826326bd2eec27e7d0da7c0e5
      body: |
        (e.g. https://github.com/product-os/environment-production/pull/477)
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.2.4
  title: ""
  date: 2023-02-27T17:42:07.849Z
- commits:
    - subject: Do not match renovate labels on balena-os repos for now
      hash: 8a6150414d4825d97267769852e3d7a3229a5739
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.2.3
  title: ""
  date: 2023-02-27T17:33:05.748Z
- commits:
    - subject: Revert renovate label approval
      hash: ca764b00de7985ba20b28bf3fc72d6d9207796f8
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.2.2
  title: ""
  date: 2023-02-27T16:11:18.677Z
- commits:
    - subject: Don't approve based on renovate labels
      hash: 37bbe201e0f2a7b4c2506d6b91186fdd3b44038b
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.2.1
  title: ""
  date: 2023-02-23T19:20:17.249Z
- commits:
    - subject: Enforce team membership on fork approvals
      hash: 2c4eab92eea25165ad0f3d7780d994a5ca809379
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.2.0
  title: ""
  date: 2023-02-09T16:48:08.223Z
- commits:
    - subject: Disable approval policy for forks for now
      hash: 9c5112b3c32b73c93856fea1b9244af656c66863
      body: |
        It appears that the write permissions are considered
        from the source repo, not the destination, so we need
        to switch to groups for approvals of forks.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.1.1
  title: ""
  date: 2023-02-07T17:39:10.760Z
- commits:
    - subject: Invalidate approvals on push for forks only
      hash: 7f764c03364bfc58dd34d5f3c0b506d4e3bc4c4d
      body: |
        Internal branches should only need to be approved once.
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.1.0
  title: ""
  date: 2023-02-03T19:03:35.594Z
- commits:
    - subject: Fix conditions for renovate labels
      hash: e4844e55fce07a3eddac46336806a2803d2921ff
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.0.7
  title: ""
  date: 2023-01-25T13:56:43.397Z
- commits:
    - subject: Only approve renovate PRs with specific updateTypes
      hash: 081294f226f5be5c1287781973041ea66e63ef39
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Add custom Flowzone action to validate the approval policy syntax
      hash: 72da1deb0a382e17db1d93a7ca379286450c9d66
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.0.6
  title: ""
  date: 2023-01-24T14:31:38.912Z
- commits:
    - subject: Revert "Tune PR approval using labels"
      hash: 9532ba99c1ee8debfd85bdfe675c104f217b39dc
      body: |
        This reverts commit df9dbd3da6dc652884608908b70b006d341d4ca5.
        This reverts commit 400b5490d30d12df3ee7cdade47850b7ad24795f.
      footer:
        Change-type: patch
        change-type: patch
      author: Kyle Harding
      nested: []
  version: 1.0.5
  title: ""
  date: 2023-01-22T02:08:42.795Z
- commits:
    - subject: Tune PR approval using labels
      hash: df9dbd3da6dc652884608908b70b006d341d4ca5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.0.4
  title: ""
  date: 2023-01-20T23:09:10.919Z
- commits:
    - subject: Fix policy YML
      hash: 4d3bc54f19528593a1c7bd7bd9129bde288c53bc
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: ab77
      nested: []
  version: 1.0.3
  title: ""
  date: 2023-01-17T17:14:33.067Z
- commits:
    - subject: Separate label policies
      hash: 4594128d7413e48298f8dcdf22add4693cde170a
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.0.2
  title: ""
  date: 2023-01-17T17:09:01.132Z
- commits:
    - subject: Specify default branch
      hash: 6311c7b1e43966c39c20f369b8f36509119edebb
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
  version: 1.0.1
  title: ""
  date: 2023-01-17T16:28:43.003Z
- commits:
    - subject: Enable Flowzone
      hash: e5d5c243eca73f85cd7f8b0b2979e5edfa4e16e6
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: ab77
      nested: []
    - subject: Approve renovate PRs automatically
      hash: dc4baae4450e27c03e2a48b8bbfb31999ab63cca
      body: >
        *
        [renovate](https://github.com/product-os/renovate-config/blob/master/.github/renovate.json#L21-L23)
        adds `renovate` and `dependencies` labels to each PR

        * write privilege required to label PRs
      footer:
        Change-type: minor
        change-type: minor
      author: Anton Belodedenko
      nested: []
    - subject: "policies: approval: s/Signed-off-by/Acked-by"
      hash: 99f55933cba7320b82f3aba07f9672e5a18762f6
      body: >
        Acked-by is a more appropriate approval comment than Signed-off-by, the

        latter of which is used to indicate that the contribution complies with

        the licensing of the project, rather than indicating that the

        contribution has been reviewed and found to have technical merit.


        https://www.kernel.org/doc/html/v4.17/process/submitting-patches.html#using-reported-by-tested-by-reviewed-by-suggested-by-and-fixes
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Joseph Kogut <joseph@balena.io>
        signed-off-by: Joseph Kogut <joseph@balena.io>
      author: Joseph Kogut
      nested: []
    - subject: Clean up comment patterns
      hash: 5968d9073b72aa83f52c1a306901981512c745ed
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Remove contributors condition
      hash: 71efa6b15a6a13ed0b9b5cd1f416ac5ee02a5deb
      body: |
        We want to allow multiple contributors, without requiring it.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: "set author_is_only_contributor: false"
      hash: 664e5b993574b55de42ef2b9a3d1def7f79868c4
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
    - subject: Add additional balena orgs to sync workflow
      hash: 0e23b7f2125d2652750798acbf8fd69398389922
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Sync policies across orgs on changes
      hash: 10e7b5dfe9504bc80ba12a27cc712a14e49462d7
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Rename repo and policy file to support additional policies
      hash: 63d4dfa7836229ed540aeac7b7c4d3c348f61217
      body: |
        We don't want to limit ourselves to a single policy file.
      footer:
        Change-type: major
        change-type: major
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Disable comment strings and prefer comment patterns
      hash: daeca1a149ad9e48e997f69bd1939f96d12079cb
      body: |
        For now we want to avoid matching words in the middle of
        a comment body and prefer a more strict match.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Fix regex and enable comments
      hash: f48676e5b068aa8ba900b5e4f387fcf2e11f836d
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
    - subject: Fix policy schema
      hash: 0d620a6c46f4105eeef435ce70c646867513a6d9
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Anton Belodedenko
      nested: []
    - subject: Allow contributors and authors to approve
      hash: 1f826d47739f763ec42aae0998f0b106f64c965f
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Add additional comment patterns for approvals
      hash: 0b57ab84b6e4ecf45f9eb64096fe349497a14542
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Allow non-author contributors to contribute and/or approve
      hash: 67e06927214c137d6dc79597e2521c0b95486c54
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 1.0.0
  title: ""
  date: 2023-01-17T16:16:54.543Z
